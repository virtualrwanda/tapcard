<!-- admin_dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>user Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body class="flex bg-red-100">
    <div class="w-1/5 h-screen bg-gray-800 p-5">
        <h2 class="text-white text-lg font-semibold mb-4">User [{{ username }}]</h2>
        <ul class="space-y-2">
            <li><a href="{{ url_for('x') }}" class="text-gray-300 hover:text-white flex items-center"><i class="fas fa-tachometer-alt mr-2"></i> Dashboard</a></li>
<!--             <li> -->
<!--                 <a href="{{ url_for('view_cards') }}" class="text-gray-300 hover:text-white flex items-center">
                    <i class="fas fa-credit-card mr-2"></i> View Cards
                </a>-->
            <li> 
                    <a href="{{ url_for('manage_cards') }}" class="text-gray-300 hover:text-white flex items-center"><i class="fas fa-users mr-2"></i> manage_cards</a></li>
                <li><a href="{{ url_for('transfer_balance') }}" class="text-gray-300 hover:text-white flex items-center">
                    <i class="fas fa-credit-card mr-2"></i>    transfer_balance
                </a></li>
               
            <li><a href="{{ url_for('logout') }}" class="text-gray-300 hover:text-white flex items-center"><i class="fas fa-sign-out-alt mr-2"></i> Logout</a></li>
        </ul>
    </div>
    <div class="flex-grow p-5">
        <h3 class="text-lg font-semibold mb-4">Data  from vender_machines</h3>
       
       <h1>Manage Cards</h1>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <h2>Add New Card</h2>
    <form method="POST" action="{{ url_for('add_card') }}">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.card_number.label }}
            {{ form.card_number(size=20) }}
            {% for error in form.card_number.errors %}
                <span class="error">{{ error }}</span><br>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.cardholder_name.label }}
            {{ form.cardholder_name(size=20) }}
            {% for error in form.cardholder_name.errors %}
                <span class="error">{{ error }}</span><br>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.submit() }}
        </div>
    </form>
    <h2>Your Cards</h2>
    <ul>
        {% if cards %}
            {% for card in cards %}
                <li>{{ card.card_number }} - {{ card.cardholder_name }} (Balance: {{ card.balance }})</li>
            {% endfor %}
        {% else %}
            <li>No cards registered.</li>
        {% endif %}
    </ul>
    <a href="{{ url_for('client_dashboard') }}">Back to Dashboard</a>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <!-- PDF Viewer -->
    </div>
    <script>
        function viewPDF(url) {
            // Show the PDF viewer section
            document.getElementById("pdfViewer").classList.remove("hidden");
            const loadingTask = pdfjsLib.getDocument(decodeURIComponent(url));
            loadingTask.promise.then(pdf => {
                pdf.getPage(1).then(page => {
                    const scale = 1.5;
                    const viewport = page.getViewport({ scale });
                    const canvas = document.getElementById('pdfCanvas');
                    const context = canvas.getContext('2d');
                    canvas.height = viewport.height;
                    canvas.width = viewport.width;

                    const renderContext = {
                        canvasContext: context,
                        viewport: viewport
                    };
                    page.render(renderContext);
                });
            }).catch(error => {
                console.error('Error loading PDF:', error);
                alert('Failed to load PDF.');
            });
        }
    </script>
</body>
</html>
